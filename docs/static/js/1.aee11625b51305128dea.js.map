{"version":3,"sources":["webpack:///./node_modules/babel-runtime/helpers/toArray.js","webpack:///src/base/base-slider.vue","webpack:///./src/base/base-slider.vue?4f27","webpack:///./src/base/base-slider.vue","webpack:///src/components/the-recommend/recommend.vue","webpack:///./src/components/the-recommend/recommend.vue?09b2","webpack:///./src/components/the-recommend/recommend.vue","webpack:///./src/api/the-recommend.js"],"names":["exports","__esModule","obj","_from","__webpack_require__","_from2","default","arr","Array","isArray","base_slider","Number","currentIndex","transformInterval","_sliderData","toArray_default","this","sliderData","firstItem","length","innerTimer","screenX","startLocation","scrollWidth","width","sliderLength","targetLength","startSlider","_this","interval","_this2","base_base_slider","render","_vm","_h","$createElement","_c","_self","staticClass","style","on","touchstart","$event","startTouch","touchmove","touching","touchend","endTouch","_l","item","index","key","attrs","href","linkUrl","src","picUrl","alt","_v","class","active","sliderListLength","staticRenderFns","src_base_base_slider","normalizeComponent","ssrContext","recommend","mixin","methods","extends_default","bottom","refresh","dissid","slider","list","_getRecommend","_getPlaylist","BaseSlider","BaseScroll","base_scroll","BaseLoading","base_loading","the_recommend_recommend","ref","data","songsList","sliderList","_e","click","showListDetail","directives","name","rawName","value","expression","domProps","innerHTML","_s","creator","dissname","recommend_Component","recommend_normalizeComponent","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_3__config__","platform","uin","needNewCode","Object","__WEBPACK_IMPORTED_MODULE_2__common_js_jsonp__","hostUin","sin","ein","sortId","categoryId","rnd","Math","random","format","__WEBPACK_IMPORTED_MODULE_4_axios___default","a","get","params","then","res","recommendId","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","type","json","utf8","onlysong","disstid","loginUin"],"mappings":"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","file":"static/js/1.aee11625b51305128dea.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  return Array.isArray(arr) ? arr : (0, _from2.default)(arr);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/toArray.js\n// module id = 7nRM\n// module chunks = 1","<template>\r\n  <div class=\"slider\">\r\n    <ul\r\n    class=\"slider-group\"\r\n    @touchstart=\"startTouch($event)\"\r\n    @touchmove=\"touching($event)\"\r\n    @touchend=\"endTouch($event)\"\r\n    :style=\"sliderTransform\"\r\n    >\r\n      <li\r\n        class=\"slider-item\"\r\n        v-for=\"(item, index) of sliderList\"\r\n        :key=\"index\"\r\n      >\r\n        <a :href=\"item.linkUrl\">\r\n          <img :src=\"item.picUrl\" alt=\"slider-pic\">\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <ul class=\"slider-dots\">\r\n      <li\r\n        v-for=\"(item, index) of sliderData\"\r\n        :key=\"index\"\r\n        :class=\"['slider-dot', {'active': (currentIndex === index + 1) || (currentIndex === sliderListLength - 1 && index === 0) || (currentIndex === 0 && index === sliderListLength - 3)}]\"\r\n      ></li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    sliderData: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    interval: {\r\n      type: Number,\r\n      default: 3000\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      currentIndex: 0, // 显示图像的索引\r\n      innerTimer: 0, // 定时器\r\n      isResetIndex: false, // 是否重置 index\r\n      isTransforming: false, // 是否在过渡中\r\n      transformInterval: 500, // 过渡时长\r\n      startLocation: 0,\r\n      movingLocation: 0\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    sliderTransform () {\r\n      return {\r\n        transform: `translateX(${-100 * this.currentIndex}%)`,\r\n        transition: this.isResetIndex ? '' : `transform ${this.transformInterval}ms`\r\n      }\r\n    },\r\n    sliderList () {\r\n      const [firstItem, ...other] = this.sliderData\r\n      // 数组拷贝，防止篡改 props\r\n      return [other[other.length - 1]].concat(this.sliderData, [firstItem])\r\n    },\r\n    sliderListLength () {\r\n      return this.sliderList.length\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    startTouch (evt) {\r\n      if (this.currentIndex === -1 || this.currentIndex === this.sliderListLength) {\r\n        return // 触摸时为页首或页末时，返回\r\n      }\r\n      if (evt.target !== evt.currentTarget) {\r\n        clearInterval(this.innerTimer)\r\n        this.isResetIndex = true\r\n        this.startLocation = evt.targetTouches[0].screenX // 因 js 限制， vue 无法监听属性值的变化\r\n      }\r\n    },\r\n    touching (evt) {\r\n      if (evt.target !== evt.currentTarget) {\r\n        this.movingLocation = evt.targetTouches[0].screenX\r\n        let sliderLength = this.movingLocation - this.startLocation\r\n\r\n        if (this.currentIndex === 0) { // 若开始轮播时向左滑动\r\n          this.currentIndex = 5\r\n        }\r\n\r\n        if (Math.abs(sliderLength) > evt.target.scrollWidth) { // 一次拖动最多只能拖动一张图\r\n          sliderLength = sliderLength < 0 ? -evt.target.scrollWidth : evt.target.scrollWidth\r\n        }\r\n\r\n        const targetWidth = parseInt(window.getComputedStyle(evt.target).width)\r\n        const targetLength = -targetWidth * this.currentIndex + sliderLength\r\n        evt.currentTarget.style.transform = `translateX(${targetLength}px)`\r\n      }\r\n    },\r\n    endTouch (evt) {\r\n      if (evt.target !== evt.currentTarget && this.movingLocation && this.currentIndex < this.sliderListLength - 1) {\r\n        const sliderLength = this.movingLocation - this.startLocation\r\n        if (sliderLength < 0) {\r\n          this.currentIndex++\r\n        } else if (sliderLength > 0) {\r\n          this.currentIndex--\r\n        }\r\n        this.startLocation = 0\r\n        this.movingLocation = 0\r\n        this.isResetIndex = false\r\n        this.startSlider()\r\n      }\r\n    },\r\n    startSlider () {\r\n      this.innerTimer = setInterval(() => {\r\n        this.currentIndex++ // 图片轮转由 currentIndex 驱动\r\n      }, this.interval)\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    currentIndex (newIndex, oldIndex) {\r\n      if ((newIndex === 1 && oldIndex === (this.sliderListLength - 1)) || (oldIndex === 0 && newIndex === this.sliderListLength - 2)) {\r\n        this.isResetIndex = true // 取消过渡动画，transition 属性\r\n        return\r\n      }\r\n\r\n      this.isResetIndex = false\r\n      this.isTransforming = true\r\n\r\n      setTimeout(() => {\r\n        if (this.currentIndex === 0) {\r\n          this.currentIndex = this.sliderListLength - 2\r\n        } else if (this.currentIndex === this.sliderListLength - 1) {\r\n          this.currentIndex = 1\r\n        }\r\n        this.isTransforming = false\r\n      }, this.transformInterval) // 在动画结束后切换\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.startSlider()\r\n  },\r\n\r\n  destroyed () {\r\n    clearInterval(this.innerTimer) // 在组件销毁后清理定时器\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~scss/variables';\r\n.slider {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  min-width: 100%;\r\n  overflow: hidden;\r\n  font-size: 0;\r\n  .slider-group {\r\n      white-space: nowrap;\r\n    .slider-item {\r\n      display: inline-block;\r\n      width: 100%;\r\n      a {\r\n        display: block;\r\n        height: 100%;\r\n        width: 100%;\r\n        img {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .slider-dots {\r\n    position: absolute;\r\n    right: 0;\r\n    left: 0;\r\n    bottom: 12px;\r\n    text-align: center;\r\n    font-size: 0;\r\n    .slider-dot {\r\n      display: inline-block;\r\n      margin: 0 4px;\r\n      width: 8px;\r\n      height: 8px;\r\n      border-radius: 50%;\r\n      background-color: $color-text-l;\r\n      &.active {\r\n        width: 20px;\r\n        border-radius: 4px;\r\n        background-color: $color-text-ll;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/base-slider.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"slider\"},[_c('ul',{staticClass:\"slider-group\",style:(_vm.sliderTransform),on:{\"touchstart\":function($event){_vm.startTouch($event)},\"touchmove\":function($event){_vm.touching($event)},\"touchend\":function($event){_vm.endTouch($event)}}},_vm._l((_vm.sliderList),function(item,index){return _c('li',{key:index,staticClass:\"slider-item\"},[_c('a',{attrs:{\"href\":item.linkUrl}},[_c('img',{attrs:{\"src\":item.picUrl,\"alt\":\"slider-pic\"}})])])})),_vm._v(\" \"),_c('ul',{staticClass:\"slider-dots\"},_vm._l((_vm.sliderData),function(item,index){return _c('li',{key:index,class:['slider-dot', {'active': (_vm.currentIndex === index + 1) || (_vm.currentIndex === _vm.sliderListLength - 1 && index === 0) || (_vm.currentIndex === 0 && index === _vm.sliderListLength - 3)}]})}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-649cfdbc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/base-slider.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-649cfdbc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./base-slider.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./base-slider.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./base-slider.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-649cfdbc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./base-slider.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-649cfdbc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/base-slider.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"recommend\" ref=\"recommend\">\r\n    <BaseScroll class=\"scroll-wrapper\" :data=\"songsList\" ref=\"scroll\">\r\n      <div>\r\n        <!-- 轮播图 -->\r\n        <div class=\"slider-wrapper\"><!-- 仅做 dots 定位的参照物 -->\r\n        <!-- v-if=\"sliderList.length\" 用于在返回数据后再渲染子组件，否则初始化传入初始值空数组，将导致子组件报错 -->\r\n          <BaseSlider v-if=\"sliderList.length\" :sliderData=\"sliderList\" :interval=\"3000\"></BaseSlider>\r\n        </div>\r\n        <!-- 推荐列表 -->\r\n        <div class=\"recommend-list\">\r\n          <h1 class=\"list-title\">热门歌单推荐</h1>\r\n          <ul>\r\n            <li\r\n              class=\"recommend-item\"\r\n              v-for=\"(item, index) of songsList\"\r\n              :key=\"index\"\r\n              @click=\"showListDetail(item)\"\r\n            >\r\n              <div class=\"item-avatar\">\r\n                <!-- vue-lazyLoad 列表图像懒加载 -->\r\n                <img v-lazy=\"item.imgurl\" alt=\"item-avatar\">\r\n              </div>\r\n              <div class=\"item-content\">\r\n                <h2 class=\"item-name\" v-html=\"item.creator.name\"></h2>\r\n                <p class=\"item-description\" v-html=\"item.dissname\"></p>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <!-- 加载中提示 -->\r\n      <div class=\"loading-container\" v-show=\"!songsList.length\">\r\n        <BaseLoading/>\r\n      </div>\r\n    </BaseScroll>\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRecommend, getPlaylist } from '@/api/the-recommend'\r\nimport { ERR_OK } from 'api/config'\r\nimport BaseSlider from 'base/base-slider'\r\nimport BaseScroll from 'base/base-scroll'\r\nimport BaseLoading from 'base/base-loading/base-loading'\r\nimport { playlistMixin } from 'common/js/mixin'\r\nimport { mapMutations } from 'vuex'\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  data () {\r\n    return {\r\n      sliderList: [],\r\n      songsList: []\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    handlePlaylist (playlist) { // playlist 出自 mixins\r\n      const bottom = this.playlist.length > 0 ? '60px' : ''\r\n\r\n      this.$refs.recommend.style.bottom = bottom\r\n      this.$refs.scroll.refresh()\r\n    },\r\n\r\n    showListDetail (item) {\r\n      this.setRecommendItem(item)\r\n      this.$router.push({path: `/recommend/${item.dissid}`})\r\n    },\r\n\r\n    ...mapMutations({\r\n      setRecommendItem: 'SET_RECOMMEND_ITEM'\r\n    }),\r\n\r\n    _getRecommend () {\r\n      getRecommend().then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.sliderList = res.data.slider\r\n        } else {\r\n          throw new Error('Check ERR_OK failed')\r\n        }\r\n      })\r\n    },\r\n\r\n    _getPlaylist () {\r\n      getPlaylist().then(res => {\r\n        if (res.code === ERR_OK) {\r\n          this.songsList = res.data.list\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n     * 1.若 .slider-wrapper 不使用 padding 轮播图占位，那么监听 load 事件调用\r\n     *   loadImg 刷新 BaseScroll 组件状态，以重新计算滚动高度\r\n     * 2.给 img 标签添加 @load=\"loadImg\"\r\n     */\r\n\r\n    // loadImg () {\r\n    //   if (!this.hasLoadImg) {  // if 保证只执行唯一一次刷新组件函数，只要一张图加载出来即可\r\n    //     this.$refs.basescroll.refresh()\r\n    //     this.hasLoadImg = true\r\n    //   }\r\n    // }\r\n  },\r\n\r\n  created () {\r\n    this._getRecommend()\r\n    this._getPlaylist()\r\n  },\r\n\r\n  components: {\r\n    BaseSlider,\r\n    BaseScroll,\r\n    BaseLoading\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~scss/variables';\r\n\r\n.recommend {\r\n  position: fixed;\r\n  top: 88px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  font-size: 0;\r\n  .scroll-wrapper {\r\n    height: 100%;\r\n    overflow: hidden;\r\n    .slider-wrapper {\r\n      position: relative; // dots 定位参照系\r\n      top: 0;\r\n      left: 0;\r\n      padding-top: 40%; // 轮播图占位\r\n    }\r\n    .recommend-list {\r\n      .list-title {\r\n        text-align: center;\r\n        height: 65px;\r\n        line-height: 65px;\r\n        font-size: 14px;\r\n        color: $color-theme;\r\n      }\r\n      .recommend-item {\r\n        display: flex;\r\n        box-sizing: border-box;\r\n        align-items: center;\r\n        padding: 0 20px 20px 20px;\r\n        .item-avatar {\r\n          flex: 0 0 60px;\r\n          padding-right: 20px;\r\n          img {\r\n            width: 60px;\r\n            height: 60px;\r\n          }\r\n        }\r\n        .item-content {\r\n          display: flex;\r\n          flex-direction: column;\r\n          justify-content: center;\r\n          flex: 1;\r\n          overflow: hidden;\r\n          line-height: 20px;\r\n          .item-name {\r\n            margin-bottom: $font-size-small-s;\r\n            font-size: $font-size-medium;\r\n            color: $color-text;\r\n          }\r\n          .item-description {\r\n            color: $color-text-d;\r\n            font-size: $font-size-medium;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .loading-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 50%; // 左上顶点至已定位祖先容器的 50%\r\n    transform: translateY(-50%); // 上移自身高度的 50%\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/the-recommend/recommend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"recommend\",staticClass:\"recommend\"},[_c('BaseScroll',{ref:\"scroll\",staticClass:\"scroll-wrapper\",attrs:{\"data\":_vm.songsList}},[_c('div',[_c('div',{staticClass:\"slider-wrapper\"},[(_vm.sliderList.length)?_c('BaseSlider',{attrs:{\"sliderData\":_vm.sliderList,\"interval\":3000}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"recommend-list\"},[_c('h1',{staticClass:\"list-title\"},[_vm._v(\"热门歌单推荐\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.songsList),function(item,index){return _c('li',{key:index,staticClass:\"recommend-item\",on:{\"click\":function($event){_vm.showListDetail(item)}}},[_c('div',{staticClass:\"item-avatar\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.imgurl),expression:\"item.imgurl\"}],attrs:{\"alt\":\"item-avatar\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"item-content\"},[_c('h2',{staticClass:\"item-name\",domProps:{\"innerHTML\":_vm._s(item.creator.name)}}),_vm._v(\" \"),_c('p',{staticClass:\"item-description\",domProps:{\"innerHTML\":_vm._s(item.dissname)}})])])}))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songsList.length),expression:\"!songsList.length\"}],staticClass:\"loading-container\"},[_c('BaseLoading')],1)]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57ecffea\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/the-recommend/recommend.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57ecffea\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57ecffea\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57ecffea\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/the-recommend/recommend.vue\n// module id = null\n// module chunks = ","// 向 jsonp 实现添加参数并封装\r\nimport jsonp from '@/common/js/jsonp'\r\nimport { commonParams, options, RECOMMEND_URL, PLAYLIST_URL, RECOMMEND_ITEM_URL } from './config'\r\nimport axios from 'axios'\r\n\r\nexport function getRecommend () {\r\n  const data = Object.assign({}, commonParams, {\r\n    platform: 'h5',\r\n    uin: 0,\r\n    needNewCode: 1\r\n  })\r\n  return jsonp(RECOMMEND_URL, data, options)\r\n}\r\n\r\nexport function getPlaylist () {\r\n  const data = Object.assign({}, commonParams, { // 将公共参数和个体参数合并\r\n    platform: 'yqq',\r\n    hostUin: 0,\r\n    sin: 0,\r\n    ein: 29,\r\n    sortId: 5,\r\n    needNewCode: 0,\r\n    categoryId: 10000000,\r\n    rnd: Math.random(),\r\n    format: 'json'\r\n  })\r\n\r\n  return axios.get(PLAYLIST_URL, {\r\n    params: data\r\n  }).then(res => res.data)\r\n}\r\n\r\nexport function getRecommendItem (recommendId) {\r\n  const data = {\r\n    ...commonParams,\r\n    ...{\r\n      type: 1,\r\n      json: 1,\r\n      utf8: 1,\r\n      onlysong: 0,\r\n      disstid: recommendId,\r\n      loginUin: 0,\r\n      hostUin: 0,\r\n      platform: 'yqq',\r\n      needNewCode: 0\r\n    }\r\n  }\r\n\r\n  // 在没有 header 验证的情况下直接使用 jsonp 请求 url，否则使用后端 ajax 代理\r\n  // return jsonp(RECOMMEND_ITEM_URL, data, {\r\n  //   ...options,\r\n  //   // https://github.com/webmodules/jsonp/blob/master/index.js#L50\r\n  //   prefix: '', // 回调函数前缀，默认值为 __jp\r\n  //   name: 'playlistinfoCallback' // 回调函数名，默认值为从 0 开始的计数器\r\n  // })\r\n\r\n  return axios.get(RECOMMEND_ITEM_URL, {\r\n    params: data\r\n  }).then(res => res.data)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/the-recommend.js"],"sourceRoot":""}